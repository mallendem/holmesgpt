user_prompt: 'What is wrong with << { "type": "pod", "name": "giant-narwhal-6958c5bdd8-69gtn", "namespace": "app-02" } >> ?'
expected_output:
  - The pod was killed due to it being out of memory

tags:
  - kubernetes
  - easy
  - question-answer

# This test creates a pod that consumes memory until it gets OOMKilled
# Using 'tail /dev/zero' which reads infinite zeros and buffers them in memory
before_test: |
  kubectl create namespace app-02
  kubectl apply -f ./manifest.yaml
  # Wait for pod to exist and then for OOMKilled status
  for i in {1..12}; do kubectl get pod giant-narwhal-6958c5bdd8-69gtn -n app-02 -o jsonpath='{.status.containerStatuses[0].state.terminated.reason}' 2>/dev/null | grep -q "OOMKilled" && break || sleep 5; done

after_test: |
  kubectl delete namespace app-02
